<!DOCTYPE html>
<html>
<head>
    <title>Tehtävä 4</title>
</head>
<body>
    <table>
    <tr>
        <th>T1</th>
        <th>T2</th> 
        <th>T3</th>
        <th>T4</th>
    </tr>
    <tr>
        <td><input type="text" size="1"/></td>
        <td><input type="text" size="1"/></td> 
        <td><input type="text" size="1"/></td>
        <td><input type="text" size="1"/></td>
    </tr>
    </table>
    <hr/>
    <div id="print"></div>
       
  
<script>
    let inputs = document.querySelectorAll('input');
    let validInputs = [];

    for(i = 0; i <= 6; i++){
        validInputs.push(i);
    }
    
    let grades = (sum) => {
        if(sum == "VIRHE!"){
            return "VIRHE!";
        }
        if(sum >= 0 && sum <= 12){
            return 0;
        } else if (sum >= 13 && sum <= 15){
            return 1;
        } else if (sum >= 16 && sum <= 17){
            return 2;
        } else if (sum >= 18 && sum <= 19){
            return 3;
        } else if (sum >= 20 && sum <= 21){
            return 4;
        } else if (sum >= 22 && sum <= 24){
            return 5;
        }
    }

    let validCheck = (value) => {
        for(validValue of validInputs){
            if(value == validValue){
                return true;
            }
        }
        return false;
    }

    let calculate = () => {
        let valid = true;
        let sum = 0;
        for(value of inputs){
            if(!validCheck(Number(value.value))){
                valid = false;
                sum = "VIRHE!";
                break;
            }
            sum += Number(value.value);
        }
        document.getElementById('print').innerHTML = "<p>Pistemäärä (summa): " + sum + "</p><p>Arvosana: " + grades(sum) + "</p>";
    }

    for(value of inputs){
        value.addEventListener('blur', calculate);
    }
</script>
</body>
</html>